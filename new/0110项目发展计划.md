# Wasteland Survivor 项目开发行动纲领 (v2.2)

> 更新时间：2026-01-11
> 项目目录：`D:\Code\fallout_roguelike`
> 远程仓库：https://github.com/keithhegit/fallout_roguelite

---

## 0. 执行摘要（TL;DR）

**项目目标**：将修仙文字 RPG 换皮为 Fallout 风格竖屏 H5（PWA），面向西方市场，部署至 Cloudflare Pages。

**当前状态**：
- ✅ **全量英文化完成**：UI、业务逻辑、注释、工具类已彻底清除中文残留，兼容 Key 已移除。
- ✅ **基础建设完备**：移动端骨架、PWA、部署链路、废土 UI 主题（Pip-Boy/CRT）已落地。
- ✅ **视觉风格统一**：完成全局视觉去"修仙"化，彻底移除 `mystic-*` 样式，统一为 Fallout 终端风格。
- ✅ **交互体验升级**：日志面板升级为结构化卡片流，信息展示更直观。
- ✅ **内容资产**：完成地点美术素材的全量实装（含自动匹配逻辑）。

**下一阶段关键任务**：
1. **Inventory 物品卡片优化**（优先级 P1）：优化装备对比和管理体验。
2. **工程质量**（优先级 P2）：ESLint 警告清零。

---

## 1. 技术栈与工程现状

### 1.1 核心技术栈

| 类别 | 技术 | 版本 |
|------|------|------|
| 前端框架 | React + TypeScript | 19.2 / 5.8 |
| 构建工具 | Vite | 6.2 |
| 样式方案 | Tailwind CSS | 4.x |
| PWA | vite-plugin-pwa + workbox | 1.2 / 7.4 |
| 状态管理 | React Hooks + localStorage | - |
| 部署平台 | Cloudflare Pages | - |

### 1.2 项目结构速览

```
fallout_roguelike/
├── App.tsx                 # 应用主入口
├── components/             # UI 组件（Modal/Panel 为主）
├── views/                  # 业务视图层
├── constants/              # 游戏数据常量
├── services/               # 服务层
├── hooks/                  # 自定义 Hooks
├── utils/                  # 工具函数
├── locales/en/             # 英文翻译文件（8 个 JSON）
└── new/                    # 规划文档
```

---

## 2. 已完成工作清单

### 2.1 基础设施 ✅

| 模块 | 状态 | 说明 |
|------|------|------|
| i18n 完整性 | ✅ | 代码库（UI/Logic/Comments）全量英文化，无中文残留 |
| PWA 支持 | ✅ | Manifest 配置完成，支持离线访问 |
| CI/CD | ✅ | GitHub Actions 自动部署至 Cloudflare Pages |
| 视觉基建 | ✅ | CRT 扫描线效果、Tailwind 废土主题色配置完成 |

### 2.2 组件终端化 & 本地化 ✅

| 组件 | 状态 | 说明 |
|------|------|------|
| GlobalChat | ✅ | 界面文本本地化，Emoji 正则优化 |
| BatchUse/Feed | ✅ | 批量操作界面本地化，移除中文判断逻辑 |
| WelcomeScreen | ✅ | 标题与导入提示本地化 |
| BattleModal | ✅ | 日志展示与状态区统一 |
| AutoAdventure | ✅ | 扫描线/术语/按钮统一 |

---

## 3. 待办事项详细方案 (v2.2 迭代)

### 3.1 P1 - 视觉与内容 (Visuals & Content)

#### 3.1.1 视觉风格大一统 (Visual Unification)
- **目标**：彻底清除 "修仙" 痕迹，确立 "废土终端" 风格。
- **任务**：
    - [x] 全局搜索并替换 `mystic-gold`, `mystic-jade`, `mystic-blood` 等旧 class。
    - [x] 统一 Modal 边框风格（使用 `amber-500/emerald-500` 线框 + CRT 扫描线）。
    - [x] 优化 Button 交互状态（Hover/Active 的辉光效果）。

#### 3.1.2 地点美术素材补全 (Location Assets)
- **目标**：让每个探索地点都有对应的视觉反馈。
- **任务**：
    - [x] 整理剩余 40+ 地点清单。
    - [x] 生成或匹配对应的像素/低保真风格图片（通过关键字自动匹配复用现有素材）。
    - [x] 在 `constants/assets.ts` 中注册并实装（已在 `services/randomService.ts` 实现逻辑）。

### 3.2 P2 - 交互体验 (UX Polish)

#### 3.2.1 结构化日志升级 (Structured Logs)
- **目标**：提升移动端阅读体验，从 "文字墙" 变为 "信息流"。
- **任务**：
    - [x] 设计 `LogCard` 组件（包含图标、时间戳、关键信息高亮）。
    - [x] 改造 `LogPanel` 支持渲染组件列表而非纯文本。
    - [x] 区分日志类型（战斗、获得物品、剧情、系统），应用不同视觉样式。

#### 3.2.2 Inventory 物品卡片优化
- **目标**：让装备对比和管理更直观。
- **任务**：
    - [ ] 优化 `ItemCard` 布局，支持紧凑模式。
    - [ ] 增强 `CompareTooltip`，清晰展示属性升降（绿升红降）。

### 3.3 P3 - 工程质量 (Engineering)

#### 3.3.1 ESLint 警告清零
- **任务**：运行 `pnpm lint` 并修复残留的 `no-unused-vars` 等警告。

---

## 4. 开发优先级矩阵

| 优先级 | 任务 | 预计工时 | 状态 |
|-------|------|---------|---|
| **P0** | 全量英文化 (UI/Logic) | - | ✅ 完成 |
| **P1** | 视觉风格大一统 (移除 mystic-*) | 3h | ✅ 完成 |
| **P1** | 地点美术素材实装 (剩余 40+) | 2h | 🔄 待办 |
| **P2** | 结构化日志升级 | 4h | ✅ 完成 |
| **P2** | Inventory 物品卡优化 | 3h | ⚠️ 待办 |
| **P3** | ESLint 警告清零 | 2h | ⚠️ 待办 |

---

## 5. 版本历史

| 日期 | 版本 | 变更说明 |
|-----|------|---------|
| 2026-01-11 | v2.2.1 | 视觉风格统一 (Fallout Terminal Theme)，日志结构化升级 |
| 2026-01-10 | v2.2 | 全量英文化完成 (UI/逻辑/注释)，移除中文兼容 Key；制定视觉统一计划 |
| 2026-01-09 | v2.1 | 更新 randomService 修复状态，标记地点素材实装进度 |
| 2026-01-08 | v2.0 | 重构为详细开发行动纲领，增加 step-by-step 方案 |
